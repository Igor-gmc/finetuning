# Fine-tuning vs RAG: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤ –¥–ª—è —á–∞—Ç-–±–æ—Ç–∞ –£–ò–ò

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ —Å–æ–∑–¥–∞–Ω–∏—é AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞:
1. Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π) —Å –¥–æ–æ–±—É—á–µ–Ω–∏–µ–º Fine-tuning - –¥–æ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ
2. RAG (Retrieval-Augmented Generation) Qdrant Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π) –±–µ–∑ Fine-tuning - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π —Å Qdrant + Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π) –±–µ–∑ –¥–æ–æ–±—É—á–µ–Ω–∏—è Fine-tuning

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –¥–∞–µ—Ç –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –ø–æ–∫—É–ø–∫–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤:
- Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π) —Å –¥–æ–æ–±—É—á–µ–Ω–∏–µ–º Fine-tuning
- RAG (Retrieval-Augmented Generation) Qdrant Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π) –±–µ–∑ Fine-tuning

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
system_instruction = """–í—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞.
–ö–æ–º–ø–∞–Ω–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –ø—Ä–æ–¥–∞–∂–µ–π –∫—É—Ä—Å–æ–≤ –ø–æ AI.
–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å (–∑–∞–ø—Ä–æ—Å) —Ç–∞–∫, —á—Ç–æ–±—ã —á–µ–ª–æ–≤–µ–∫ –∑–∞—Ö–æ—Ç–µ–ª –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –∫—É–ø–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ.
–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ –æ—Ç–≤–µ—Ç–∞, –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç–µ, –Ω–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å –≤—ã–¥—É–º—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –í–∞–º —Å–ª–µ–¥—É–µ—Ç –¥–æ–±–∏—Ç—å—Å—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –º–æ–¥–µ–ª—å –Ω–µ —Ç–æ–ª—å–∫–æ –æ—Ç–≤–µ—á–∞–ª–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π, –Ω–æ –∏ –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –ø–ª–∞—Ç–Ω—ã–µ –∫—É—Ä—Å—ã. """

–í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è fine-tuning –º–æ–¥–µ–ª–∏ –∏ RAG –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –±–µ–∑ Fine-tuning:
questons = [
‚Äú–ü—Ä–∏–≤–µ—Ç, –∞ —á—Ç–æ —Ç–∞–∫–æ–µ –∫—É—Ä—Å CHATGPT PROFESSIONAL –∏ –µ–≥–æ —Å—Ç–æ–∏–º–æ—Å—Ç—å?‚Äù,
‚Äú–ü—Ä–∏–≤–µ—Ç, –∞ –∫–∞–∫–∏–µ –∫—É—Ä—Å—ã –µ—Å—Ç—å –ø–æ Python?‚Äù,
‚Äú–ö–∞–∫–∏–µ –µ—Å—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ —É –£–ò–ò?‚Äù,
‚Äú–°–∫–æ–ª—å–∫–æ –ø–æ–≤—Ä–µ–º–µ–Ω–∏ —É—á–∏—Ç—å—Å—è –Ω–∞ –∫—É—Ä—Å–µ –ø–æ GPT?‚Äù,
‚Äú–ï—Å—Ç—å —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–ª–µ –æ–±—É—á–µ–Ω–∏—è?‚Äù
]

–¥–∞—Ç–∞ —Å–µ—Ç –¥–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ selected_qa_full.csv
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ selected_qa_full.csv:
- question: –≤–æ–ø—Ä–æ—Å—ã —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –ø–æ –æ–±—Ä–∞—â–µ–Ω–∏—è–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- answer: –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç —Ö–æ—Ä–æ—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- context: —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –£–ò–ò, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å

## üìä –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–ú–æ–¥–µ–ª—å**: Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π), —Ö–∞–≥–µ—Ä—Ñ–µ–π—Å —Ç–æ–∫–µ api: HF_TOKEN –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö –∫–æ–ª–∞–±
- **Fine-tuning**: LoRA (Low-Rank Adaptation) –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –¥–æ–æ–±—É—á–µ–Ω–∏—è
- **RAG**: Qdrant –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö + SentenceTransformers –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- **–§—Ä–µ–π–º–≤–æ—Ä–∫–∏**: Transformers, PyTorch, PEFT

selected_qa_full.csv          # –î–∞—Ç–∞—Å–µ—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω –≤ –∫–æ—Ä–µ–Ω—å –∫–æ–ª–∞–±–∞



# –ò—Ç–æ–≥–æ–≤–∞—è –∑–∞–¥–∞—á–∞:
1. –°–æ–∑–¥–∞—Ç—å RAG –±–∞–∑—É –Ω–∞ –¥–∞—Ç–∞—Å–µ—Ç–µ selected_qa_full.csv
2. –î–æ–æ–±—É—á–∏—Ç—å Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π) –Ω–∞ –¥–∞—Ç–∞ —Å–µ—Ç–µ selected_qa_full.csv
3. –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Ç–µ—Ç—Å–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã questons –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:
3.1. RAG (Retrieval-Augmented Generation) Qdrant + Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π) –±–µ–∑ Fine-tuning
3.2. Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π) + Fine-tuning –Ω–∞ –¥–∞—Ç–∞ —Å–µ—Ç–µ selected_qa_full.csv
3.3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–≤–µ—Å—Ç–∏ –≤ —Ç–µ–∫—Ç–æ–≤—ã–π —Ñ–∞–π–ª result.txt –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

RAG (Retrieval-Augmented Generation) Qdrant + Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π) –±–µ–∑ Fine-tuning
========================
–í–æ–ø—Ä–æ—Å 1: 
–û—Ç–≤–µ—Ç 1:
========================
–í–æ–ø—Ä–æ—Å 2:
–û—Ç–≤–µ—Ç 2:
========================

Qwen2.5-1.5B-Instruct (—Å INT4 –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–µ–π) + Fine-tuning –Ω–∞ –¥–∞—Ç–∞ —Å–µ—Ç–µ selected_qa_full.csv
========================
–í–æ–ø—Ä–æ—Å 1: 
–û—Ç–≤–µ—Ç 1:
========================
–í–æ–ø—Ä–æ—Å 2:
–û—Ç–≤–µ—Ç 2:
========================

4. –° –ø–æ–º–æ—â—å—é gpt-4o-mini (OPENAI_API_KEY –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö –∫–æ–ª–∞–±) —Å–¥–µ–ª–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ –º–æ–∂–¥–µ–ª–µ–π –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ result.txt —Ç–µ–∫—Å—Ç –∞–Ω–∞–ª–∏–∑–∞. –ù–µ –∑–∞–±—É–¥—å –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è gpt –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ result.txt –≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è gpt